<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CBMC Proof Debugger</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-ccd8d5a0.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-5c3e0ee8.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">CBMC Proof Debugger</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="cbmc-proof-debugger"><a class="header" href="#cbmc-proof-debugger">CBMC Proof Debugger</a></h1>
<p>The
<a href="https://github.com/model-checking/cbmc-proof-debugger">CBMC Proof Debugger</a>
is a
<a href="https://code.visualstudio.com/">Visual Studio Code</a>
debugger for
<a href="https://github.com/diffblue/cbmc">CBMC</a>
error traces.</p>
<p><a href="https://github.com/diffblue/cbmc">CBMC</a>
is a model checker for C.  CBMC will explore all possible paths
through your code on all possible inputs, and will check that all
assertions in your code are true. CBMC can also check for the
possibility of security issues (like buffer overflow) and for
instances of undefined behavior (like signed integer overflow).
If CBMC finds a code issue, it generates an error trace demonstrating how that
issue could occur.
If CBMC terminates without finding any issues, the result is
assurance that your code behaves as expected.
CBMC is a <em>bounded</em> model checker, however, so getting CBMC to terminate
may require restricting inputs to some bounded size,
and CBMC’s assurance is restricted to these bounded inputs.</p>
<p><a href="https://github.com/model-checking/cbmc-viewer">CBMC Viewer</a>
is a tool that scans the output of CBMC and produces a browsable summary
of its findings, making it easy to root cause the issues CBMC finds using
any web browser.  Viewer also produces a summary of its findings in the
form of a collection of json blobs.</p>
<p>The
<a href="https://github.com/model-checking/cbmc-proof-debugger">CBMC Proof Debugger</a>
loads the json summaries produced by CBMC Viewer,
and lets a developer explore the error traces produced by CBMC using
the Visual Studio Code’s debugger.</p>
<p>To get started, see our</p>
<ul>
<li><a href="#installation">installation instructions</a> and a</li>
<li><a href="demo">simple demonstration</a> of how to use the proof debugger.</li>
</ul>
<p>References:</p>
<ul>
<li><a href="user-guide">User guide</a></li>
<li><a href="developer-guide">Developer guide</a></li>
<li><a href="faq">Frequently asked questions</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="user-guide"><a class="header" href="#user-guide">User guide</a></h1>
<p>This is the start of a user guide for the CBMC Proof Debugger.</p>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="demo">Demonstration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<h2 id="install-the-debugger"><a class="header" href="#install-the-debugger">Install the debugger</a></h2>
<p>Most people should install the debugger from within Visual Studio Code:</p>
<ul>
<li>
<p>Click on the Extensions icon in the Activity Bar on the left.</p>
<p><img src="https://code.visualstudio.com/assets/docs/editor/extension-marketplace/extensions-view-icon.png" alt="Extensions icon"></p>
</li>
<li>
<p>Search for “CBMC Proof Debugger.”</p>
</li>
<li>
<p>Click on “CBMC Proof Debugger.”</p>
</li>
<li>
<p>Click on “Install.”</p>
</li>
</ul>
<p>For more information, read about
<a href="https://code.visualstudio.com/docs/editor/extension-marketplace">installing extensions</a>
from the Extension Marketplace.</p>
<p>You can also install the debugger from the project release page:</p>
<ul>
<li>Open the
<a href="https://github.com/model-checking/cbmc-proof-debugger/releases/latest">release page</a>.</li>
<li>Download the package <code>cbmc-proof-debugger-*.vsix</code> at the bottom of the page.</li>
<li>Run <code>code --install-extension cbmc-proof-debugger-*.vsix</code> to install the package.</li>
</ul>
<p>You can safely ignore the deprecation warning about the Buffer class.</p>
<h2 id="uninstall-the-debugger"><a class="header" href="#uninstall-the-debugger">Uninstall the debugger</a></h2>
<p>To uninstall the debugger from within Visual Studio Code,</p>
<ul>
<li>click on the Extensions icon in the Activity Bar on the left,</li>
<li>click on “CBMC Proof Debugger,” and</li>
<li>click on “Uninstall.”</li>
</ul>
<p>To uninstall the debugger from the command line, run</p>
<pre><code>code --uninstall-extension model-checking.cbmc-proof-debugger
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="configuration"><a class="header" href="#configuration">Configuration</a></h1>
<p>To create a debugger configuration for the CBMC Proof Debugger, click on
the Run and Debug icon</p>
<p><img src="user-guide/run-and-debug-icon.png" alt="Run and Debug icon" style="height: 40px; margin: auto; display: block;"></p>
<p>in the Activity Bar on the left.</p>
<ul>
<li>
<p>If you have already configured some debuggers like lldb, you will see
a drop-down list of configured debuggers</p>
<p><img src="user-guide/debugger-list.png" alt="Configured debuggers" style="height: 40px; margin: auto; display: block;"></p>
<p>Expand the drop-down list, click on “Add Configuration,” click on
“CBMC Proof Debugger” in the list of available debuggers,
and save the <code>launch.json</code> configuration file.</p>
</li>
<li>
<p>If you are configuring your first debugger, you will see the Run view</p>
<p><img src="https://code.visualstudio.com/assets/docs/editor/debugging/launch-configuration.png" alt="Run start view" style="height: 400px; margin: auto; display: block;"></p>
<p>Click on “create a launch.json file” and select “CBMC Proof Debugger”
from the list of available debuggers,
and save the <code>launch.json</code> configuration file.</p>
</li>
</ul>
<p>For more information, read about
<a href="https://code.visualstudio.com/docs/editor/debugging#_launch-configurations">launch configurations</a>.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="demonstration"><a class="header" href="#demonstration">Demonstration</a></h1>
<p>This is a simple demonstration of the CBMC Proof Debugger.</p>
<ul>
<li>Follow the CBMC
<a href="https://model-checking.github.io/cbmc-training/installation.html">installation</a>
instructions to install CBMC and CBMC-related tools.</li>
<li>Follow the debugger <a href="#installation">installation</a>
instructions to add the debugger to Visual Studio Code.</li>
<li>Clone the debugger code repository and change to the demo directory
<pre><code>git clone https://github.com/model-checking/cbmc-proof-debugger
cd cbmc-proof-debugger/demo
</code></pre>
This directory contains a simple project consisting of a
<a href="demo/proof-debugger/demo/Makefile">Makefile</a> and two source files
<a href="demo/demo/foo.c">foo.c</a> and <a href="demo/demo/main.c">main.c</a>.</li>
<li>Run CBMC on the source code
<pre><code>make
</code></pre>
This will run <code>goto-cc</code> to compile the source code for CBMC,
run <code>cbmc</code> to do bounded model checking on the source code with CBMC, and
run <code>cbmc-viewer</code> to produce a browsable summary of the CBMC findings.</li>
<li>Just for fun, open the browsable summary in a web browser and look around.
On MacOS, do
<pre><code>open report/html/index.html
</code></pre>
The <code>report</code> directory produced by <code>cbmc-viewer</code>
actually contains two subdirectories:
<ul>
<li><code>html</code> contains the browsable summary.</li>
<li><code>json</code> contains some JSON files that are summaries of artifacts produced
by CBMC.</li>
</ul>
</li>
</ul>
<p>Now let’s run the debugger on the error traces produced by CBMC.
In the <code>demo</code> project directory:</p>
<ul>
<li>
<p>Open Visual Studio Code.</p>
<pre><code>code .
</code></pre>
</li>
<li>
<p>Configure the debugger for this project using the
<a href="#configuration">configuration</a> instructions.</p>
</li>
<li>
<p>Open the proof debugger console:  At the bottom of the screen, click on
the console name “Proof Debugger.”
(If you don’t see any consoles at the bottom
of the screen, click on “View -&gt; Terminal” to make them visible.)</p>
</li>
<li>
<p>Load the error traces:  On the right of the debugger console, click on
“Load Traces,” navigate to the folder <code>demo/report/json</code> in the dialog
window, and click on “Open.”</p>
</li>
<li>
<p>Select the trace you want to debug: Clicking on the failure description
for the failure you want to debug.  For example, under Line 3,
click on “dereference failure: pointer NULL in *ptr.”</p>
</li>
<li>
<p>Start the debugger:  Click on the “debug and run” icon on the left,
and select the “CBMC Proof Debugger” from the drop-down list of available
debuggers at the top, and press the green “start” icon to the left of
“CBMC Proof Debugger.”</p>
</li>
</ul>
<p>Now you can see the familiar debugger interface. In particular, you can see
the debugger toolbar at the top of the screen.</p>
<p><img src="demo/debugger-toolbar.png" alt="Debugger toolbar" style="height: 40px; margin: auto; display: block;"></p>
<p>The icons left-to-right are:</p>
<ul>
<li>Run forwards</li>
<li>Step over forwards</li>
<li>Step into function</li>
<li>Step out of function</li>
<li>Step over backwards</li>
<li>Run backwards</li>
<li>Restart the debugger</li>
<li>Halt the debugger</li>
</ul>
<p>For more information, read about
<a href="https://code.visualstudio.com/docs/editor/debugging">debugging</a>.</p>
<p>Now you can use the debugger interface to examine the program behavior
determined by the error trace just as you would to examine the program
behavior determined by a set of input values.</p>
<ul>
<li>You can run forward to run until the failure occurs, examine
the program stack, and step forwards and backwards to examine the
code leading up to the failure.</li>
<li>You can set a break point and run forwards or backwards to a break point.</li>
<li>You can examine data in any stack frame, any static variable, and any
heap object by clicking in the data view on the left.  In particular,
for structured data like strings, arrays, and structs, you can click
on a value to open it up and expose data components.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="developer-guide"><a class="header" href="#developer-guide">Developer guide</a></h1>
<p>This is the start of a developer guide for the CBMC Proof Debugger.</p>
<ul>
<li><a href="#installation-1">Installation</a></li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#implementation">Implementation</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="installation-1"><a class="header" href="#installation-1">Installation</a></h1>
<p>Clone the debugger code repository with</p>
<pre><code>git clone https://github.com/model-checking/cbmc-proof-debugger
cd cbmc-proof-debugger
</code></pre>
<p>Install Node.js and all TypeScript/JavaScript dependencies with</p>
<pre><code>make setup-macos
</code></pre>
<p>or</p>
<pre><code>make setup-ubuntu
</code></pre>
<p>depending on your operating system and package management tools.</p>
<p>On other platforms, you can download a Node.js installer for your platform
from the <a href="https://nodejs.org/en/download">Node.js download page</a>,
and the remaining setup steps in the Makefile should work.
If you learn how to build and install this package on your platform,
please submit a <a href="https://github.com/model-checking/cbmc-proof-debugger/pulls">pull request</a> to contribute your instructions.</p>
<p>From this point, the following targets will be helpful</p>
<ul>
<li><code>make package</code> builds the extension package.</li>
<li><code>make install</code> installs the extension package into Visual Studio Code.</li>
<li><code>make publish</code> publishes the extension package to the Extension Marketplace.</li>
<li><code>make format</code> runs the TypeScript formatter to standardize formatting.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="architecture"><a class="header" href="#architecture">Architecture</a></h1>
<p>This is a description of the debugger architecture in Visual Studio Code.</p>
<h2 id="debugger-overview"><a class="header" href="#debugger-overview">Debugger overview</a></h2>
<p>Visual Studio Code implements a generic user interface to debuggers.
A developer needs to learn only one user interface to use any debugger
supported by VS Code.
For example, using the debug toolbar</p>
<center>
<img src="https://code.visualstudio.com/assets/docs/editor/debugging/toolbar.png">
</center>
<p>a developer can run the program to a breakpoint, step over a function call, step into a function call,
step out of a function call, restart the program, and stop the program.
Adding a new debugger to VS Code involves writing a new VS Code extension that tells VS Code how to
drive the debugger.</p>
<p>The
<a href="https://code.visualstudio.com/api/extension-guides/debugger-extension#debugging-architecture-of-vs-code">debugging architecture</a>
of Visual Studio Code is described in the
<a href="https://code.visualstudio.com/api/extension-guides/debugger-extension">Debugger Extension</a>
guide.
In this architecture, a debug adapter sits between VS Code and the debugger.</p>
<center>
<img src="https://code.visualstudio.com/assets/api/extension-guides/debugger-extension/debug-arch1.png">
</center>
<p>The role of the debug adapter is to receive a request from VS Code,
to drive or interrogate the debugger on behalf of VS Code,
and to send an appropriate response back to VS Code.
The debug adapter also sends events to VS Code when certain events happen
within the debugger (for example, when the debugger comes to a stopping point).</p>
<p>VS Code communicates with the debug adapter using the
<a href="https://microsoft.github.io/debug-adapter-protocol">Debug Adapter Protocol</a>.
The <a href="https://microsoft.github.io/debug-adapter-protocol/specification">protocol specification</a>
defines the set of requests, responses, and event notifications sent between VS Code and the
debug adapter.
The <a href="https://microsoft.github.io/debug-adapter-protocol/overview">protocol overview</a> gives a nice example
of a sequence of requests and events that might be sent between VS Code and a debug adapter
for gdb:</p>
<center>
<img src="https://microsoft.github.io/debug-adapter-protocol/img/init-launch.png">
</center>
<h2 id="debugger-documentation"><a class="header" href="#debugger-documentation">Debugger documentation</a></h2>
<p>The <a href="https://code.visualstudio.com/docs">user documentation</a>
is the place to start if you are unfamiliar with Visual Studio Code.  The
<a href="https://code.visualstudio.com/docs/editor/codebasics">user guide</a>
introduces the basic concepts like
<a href="https://code.visualstudio.com/docs/editor/codebasics">editing</a>
and
<a href="https://code.visualstudio.com/docs/editor/debugging">debugging</a>.
Most important are</p>
<ul>
<li>The
<a href="https://code.visualstudio.com/docs/editor/debugging#_debug-actions">debug actions</a>
that a software developer uses to interact with a debugger.</li>
<li>The <a href="https://code.visualstudio.com/docs/editor/debugging#_launch-configurations">debug configuration</a>
that a software developer uses to select a debugger.</li>
</ul>
<p>The <a href="https://code.visualstudio.com/api">developer documentation</a> is the place
for extension developers to start.
Most important is</p>
<ul>
<li>The
<a href="https://code.visualstudio.com/api/extension-guides/debugger-extension">debugger extension</a>
overview gives a fairly complete example of how to write and package a debugger
extension.
The code repository used in that example was the starting point for this debugger.</li>
</ul>
<p>You should now be able to read the code implementing this debugger,
but you will eventually want to skim</p>
<ul>
<li>
<p>The
<a href="https://code.visualstudio.com/api/extension-guides/overview">Extension Guides</a>
that describe the Visual Studio Code Extension APIs.
This debugger uses</p>
<ul>
<li><a href="https://code.visualstudio.com/api/extension-guides/tree-view">Tree Views</a>
to display the code issues having traces available for debugging.</li>
</ul>
</li>
<li>
<p>The <a href="https://code.visualstudio.com/api/ux-guidelines/overview">UX Guidelines</a>
that describe the Visual Studio Code user interface.  This debugger uses</p>
<ul>
<li><a href="https://code.visualstudio.com/api/ux-guidelines/views">Views</a>
as containers of the content that appears in sidebars and panels,</li>
<li><a href="https://code.visualstudio.com/api/ux-guidelines/sidebars">Sidebars</a>
and
<a href="https://code.visualstudio.com/api/ux-guidelines/panel">Panels</a>
to display views, and</li>
<li><a href="https://code.visualstudio.com/api/ux-guidelines/notifications">Notifications</a>
to display progress and error messages.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="implementation"><a class="header" href="#implementation">Implementation</a></h1>
<p>This is an overview of the objects in the implementation and the source files
that define these objects.</p>
<h2 id="values"><a class="header" href="#values">Values</a></h2>
<p>A value can be a string, a number, a struct, or an array.  A value can appear in a trace or be stored in memory.
A value is represented in CBMC output as a string that must be parsed.</p>
<ul>
<li>value.ts: Defines the Value class and subclasses for strings, number, structs, and arrays.</li>
<li>valueLexer.ts: A lexer for values in CBMC output.</li>
<li>valueParser.ts: A parser for values in CBMC output.</li>
</ul>
<h2 id="variables"><a class="header" href="#variables">Variables</a></h2>
<p>A variable in a trace is a string like ’foo.bar[0]` consisting of a base name ‘foo’
followed by a list of selectors like field member selection ‘.bar’ or array
indexing ‘[0]’.
We model memory as a single struct, so ‘foo.bar[0]’ is modeled as ‘MEMORY.foo.bar[0]’.
We think of ‘.foo.bar[0]’ as a path through memory, where path elements
denote field selection and array indexing.
A variable is represented in CBMC output as a string that must be parsed.</p>
<ul>
<li>variable.ts: Defines the Element class and subclasses for field selection and array indexing.</li>
<li>variableLexer.ts: A lexer for variables in CBMC output.</li>
<li>variableParser.ts: A parser for variables in CBMC output.</li>
</ul>
<h2 id="failures"><a class="header" href="#failures">Failures</a></h2>
<p>A panel at the bottom of the screen displays the set of failures that can be debugged.
The failures are organized into a tree and displayed as
nested lists of files, functions within a file, lines within a
function, and failures at a line.
The debug extension describes this tree to Visual Studio Code using the Tree View API.
The key to the Tree View is the TreeDataProvider interface that includes
functions like getChildren(node) returning a node’s children and getTreeItem(node)
returning a node’s contents.
So the debug extension must load the failures available for debugging,
organize them into a tree,
and use the tree to implement the TreeDataProvider interface.</p>
<ul>
<li>traceData.ts:
The method create(result, property, loop) loads the summaries produced
by cbmc-viewer and returns a mapping file_name -&gt; function_name -&gt; line_number -&gt; failure.</li>
<li>traceTree.ts:
The method create(mapping) transforms a failure mapping into a failure tree.</li>
<li>traceView.ts:
The class TraceProvider implements the TreeDataProvider.</li>
</ul>
<h2 id="debug-adapter"><a class="header" href="#debug-adapter">Debug adapter</a></h2>
<p>The debug adapter sits between Visual Studio Code and the debugger.
The job of the debug adapter is to accept requests from Visual Studio
Code like “set breakpoint” and “run” and to generate responses after
driving the debugger and inspecting its state.</p>
<p>Visual Studio Code and the debug adapter communicate via requests and responses
defined by the <a href="https://microsoft.github.io/debug-adapter-protocol">Debug Adapter Protocol</a>.
Visual Studio Code sends the
<a href="https://microsoft.github.io/debug-adapter-protocol/specification#Requests_SetBreakpoints">SetBreakpointsRequest</a>
to the debug adapter which sends a SetBreakpointsResponse back to Visual Studio Code.</p>
<p>The class ProofDebuggerSession implements the DebugSession interface.  It maintains the state of the
debug adapter for one debugging session, and it implements methods like setBreakPointsRequest that
Visual Studio Code can use to send the SetBreakpointsRequest and receive the SetBreapointsRepsonse.</p>
<p>How the debug adapter and the debugger communicate is of no concern to Visual Studio Code.  In our case,
the debugger is really just a trace simulator.  The debug adaptor uses methods in the simulator interface
to move the simulator forwards and backwards in the trace, and to examine the current state of the trace.</p>
<ul>
<li>adapter.ts: Defines ProofDebuggerSession implementing the DebugSession interface.</li>
</ul>
<h2 id="debugger"><a class="header" href="#debugger">Debugger</a></h2>
<ul>
<li>simulator.ts: Simulator is the debugger being managed by the debug adpater</li>
<li>simulatorState.ts: A state of a trace being simulated by the simulator</li>
<li>simulatorTrace.ts: A trace being simulated by the simulator (and methods to load the trace)</li>
</ul>
<h2 id="extension-activation"><a class="header" href="#extension-activation">Extension activation</a></h2>
<ul>
<li>extension.ts: Methods to activate and deactive the debugger extension.</li>
</ul>
<h2 id="extension-utilities"><a class="header" href="#extension-utilities">Extension utilities</a></h2>
<ul>
<li>constants.ts: Defines string constants used in the extension</li>
<li>exceptions.ts: Defines an exception raised by the extension</li>
<li>storage.ts: Defines methods to access the persistent storage available to the extension</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="frequently-asked-questions"><a class="header" href="#frequently-asked-questions">Frequently asked questions</a></h1>
<p>If you have a question that is not answered here,
please file an
<a href="https://github.com/model-checking/cbmc-proof-debugger/issues">issue</a>
with your question.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
